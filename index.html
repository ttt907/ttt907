<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ピアノコード出力モード</title>
<style>
body {
font-family: sans-serif;
text-align: center;
padding: 20px;
}
button {
margin: 5px;
padding: 10px 20px;
font-size: 18px;
cursor: pointer;
}
#output {
margin-top: 30px;
font-size: 48px;
font-weight: bold;
line-height: 1.5;
overflow-y: auto;
max-height: 80vh; /* スマホで見切れないように */
}
</style>
</head>
<body>
<h1>ピアノコード出力モード</h1>

<div>
<button id="major">メジャーのみ</button>
<button id="majorMinor">メジャー＋マイナー</button>
<button id="majorMinor7">メジャー＋マイナー＋7th</button>
<button id="majorMinor7Sharp">メジャー＋マイナー＋7th＋シャープ</button>
<button id="allModes">メジャー＋マイナー＋7th＋シャープ＋フラット</button>
</div>

<div id="output"></div>

<script>
// 各モードのコードリスト
const modeLists = {
major: ["C","D","E","F","G","A","B"],
majorMinor: ["C","D","E","F","G","A","B","Cm","Dm","Em","Fm","Gm","Am","Bm"],
majorMinor7: ["C","D","E","F","G","A","B","Cm","Dm","Em","Fm","Gm","Am","Bm",
"C7","D7","E7","F7","G7","A7","B7","Cm7","Dm7","Em7","Fm7","Gm7","Am7","Bm7"],
majorMinor7Sharp: ["C","D","E","F","G","A","B","Cm","Dm","Em","Fm","Gm","Am","Bm",
"C7","D7","E7","F7","G7","A7","B7","Cm7","Dm7","Em7","Fm7","Gm7","Am7","Bm7",
"C♯","D♯","F♯","G♯","A♯","C♯m","D♯m","F♯m","G♯m","A♯m","C♯7","D♯7","F♯7","G♯7","A♯7",
"C♯m7","D♯m7","F♯m7","G♯m7","A♯m7"],
allModes: ["C","D","E","F","G","A","B","Cm","Dm","Em","Fm","Gm","Am","Bm",
"C7","D7","E7","F7","G7","A7","B7","Cm7","Dm7","Em7","Fm7","Gm7","Am7","Bm7",
"C♯","D♯","F♯","G♯","A♯","C♯m","D♯m","F♯m","G♯m","A♯m","C♯7","D♯7","F♯7","G♯7","A♯7",
"C♯m7","D♯m7","F♯m7","G♯m7","A♯m7",
"D♭","E♭","G♭","A♭","B♭","D♭m","E♭m","G♭m","A♭m","B♭m",
"D♭7","E♭7","G♭7","A♭7","B♭7","D♭m7","E♭m7","G♭m7","A♭m7","B♭m7"]
};

let lastOutput = [];

// Fisher-Yatesシャッフル（iPhoneでも安定）
function shuffle(array) {
let arr = [...array];
for (let i = arr.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[arr[i], arr[j]] = [arr[j], arr[i]];
}
return arr;
}

function getRandomCodes(list) {
lastOutput = shuffle(list).slice(0,5);
display(lastOutput);
}

function display(codesArr) {
const outputDiv = document.getElementById("output");
outputDiv.innerHTML = codesArr.map(c => `<div>${c}</div>`).join("");
}

// ボタンにイベントを登録
document.getElementById("major").onclick = () => getRandomCodes(modeLists.major);
document.getElementById("majorMinor").onclick = () => getRandomCodes(modeLists.majorMinor);
document.getElementById("majorMinor7").onclick = () => getRandomCodes(modeLists.majorMinor7);
document.getElementById("majorMinor7Sharp").onclick = () => getRandomCodes(modeLists.majorMinor7Sharp);
document.getElementById("allModes").onclick = () => getRandomCodes(modeLists.allModes);

</script>
</body>
</html>
